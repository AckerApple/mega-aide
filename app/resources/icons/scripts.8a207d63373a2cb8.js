var Neutralino=function(c){"use strict";function l(e,t,i,o){return new(i||(i=Promise))(function(s,u){function r(d){try{w(o.next(d))}catch(p){u(p)}}function a(d){try{w(o.throw(d))}catch(p){u(p)}}function w(d){var p;d.done?s(d.value):(p=d.value,p instanceof i?p:new i(function(z){z(p)})).then(r,a)}w((o=o.apply(e,t||[])).next())})}function m(e,t){let i=new CustomEvent(e,{detail:t});return window.dispatchEvent(i),Promise.resolve({success:!0,message:"Message dispatched"})}let f,g={},O=[],v={};function n(e,t){return new Promise((i,o)=>{if(f?.readyState!=WebSocket.OPEN)return void O.push({method:e,data:t,resolve:i,reject:o});const u="10000000-1000-4000-8000-100000000000".replace(/[018]/g,a=>(a^crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16)),r=window.NL_TOKEN||sessionStorage.getItem("NL_TOKEN")||"";g[u]={resolve:i,reject:o},f.send(JSON.stringify({id:u,method:e,data:t,accessToken:r}))})}function R(e){return l(this,void 0,void 0,function*(){for(;e.length>0;){let t=e.shift();try{let i=yield n(t.method,t.data);t.resolve(i)}catch(i){t.reject(i)}}})}function b(e){let t=new Uint8Array(e),i="";for(let o of t)i+=String.fromCharCode(o);return window.btoa(i)}var h,y,e,S=Object.freeze({__proto__:null,createDirectory:function(e){return n("filesystem.createDirectory",{path:e})},removeDirectory:function(e){return n("filesystem.removeDirectory",{path:e})},writeFile:function(e,t){return n("filesystem.writeFile",{path:e,data:t})},appendFile:function(e,t){return n("filesystem.appendFile",{path:e,data:t})},writeBinaryFile:function(e,t){return n("filesystem.writeBinaryFile",{path:e,data:b(t)})},appendBinaryFile:function(e,t){return n("filesystem.appendBinaryFile",{path:e,data:b(t)})},readFile:function(e){return n("filesystem.readFile",{path:e})},readBinaryFile:function(e){return new Promise((t,i)=>{n("filesystem.readBinaryFile",{path:e}).then(o=>{let s=window.atob(o),u=s.length,r=new Uint8Array(u);for(let a=0;a<u;a++)r[a]=s.charCodeAt(a);t(r.buffer)}).catch(o=>{i(o)})})},removeFile:function(e){return n("filesystem.removeFile",{path:e})},readDirectory:function(e){return n("filesystem.readDirectory",{path:e})},copyFile:function(e,t){return n("filesystem.copyFile",{source:e,destination:t})},moveFile:function(e,t){return n("filesystem.moveFile",{source:e,destination:t})},getStats:function(e){return n("filesystem.getStats",{path:e})}});(e=h||(h={})).WARNING="WARNING",e.ERROR="ERROR",e.INFO="INFO",e.QUESTION="QUESTION",function(e){e.OK="OK",e.OK_CANCEL="OK_CANCEL",e.YES_NO="YES_NO",e.YES_NO_CANCEL="YES_NO_CANCEL",e.RETRY_CANCEL="RETRY_CANCEL",e.ABORT_RETRY_IGNORE="ABORT_RETRY_IGNORE"}(y||(y={}));var E,L=Object.freeze({__proto__:null,get Icon(){return h},get MessageBoxChoice(){return y},execCommand:function(e,t){return n("os.execCommand",Object.assign({command:e},t))},spawnProcess:function(e){return n("os.spawnProcess",{command:e})},updateSpawnedProcess:function(e,t,i){return n("os.updateSpawnedProcess",{id:e,event:t,data:i})},getSpawnedProcesses:function(){return n("os.getSpawnedProcesses")},getEnv:function(e){return n("os.getEnv",{key:e})},showOpenDialog:function(e,t){return n("os.showOpenDialog",Object.assign({title:e},t))},showFolderDialog:function(e,t){return n("os.showFolderDialog",Object.assign({title:e},t))},showSaveDialog:function(e,t){return n("os.showSaveDialog",Object.assign({title:e},t))},showNotification:function(e,t,i){return n("os.showNotification",{title:e,content:t,icon:i})},showMessageBox:function(e,t,i,o){return n("os.showMessageBox",{title:e,content:t,choice:i,icon:o})},setTray:function(e){return n("os.setTray",e)},open:function(e){return n("os.open",{url:e})},getPath:function(e){return n("os.getPath",{name:e})}}),P=Object.freeze({__proto__:null,getMemoryInfo:function(){return n("computer.getMemoryInfo")},getArch:function(){return n("computer.getArch")},getKernelInfo:function(){return n("computer.getKernelInfo")},getOSInfo:function(){return n("computer.getOSInfo")},getCPUInfo:function(){return n("computer.getCPUInfo")},getDisplays:function(){return n("computer.getDisplays")}}),x=Object.freeze({__proto__:null,setData:function(e,t){return n("storage.setData",{key:e,data:t})},getData:function(e){return n("storage.getData",{key:e})}});!function(e){e.WARNING="WARNING",e.ERROR="ERROR",e.INFO="INFO"}(E||(E={}));var D=Object.freeze({__proto__:null,get LoggerType(){return E},log:function(e,t){return n("debug.log",{message:e,type:t})}}),C=Object.freeze({__proto__:null,exit:function(e){return n("app.exit",{code:e})},killProcess:function(){return n("app.killProcess")},restartProcess:function(e){return new Promise(t=>l(this,void 0,void 0,function*(){let i=window.NL_ARGS.reduce((o,s)=>o+" "+s,"");e?.args&&(i+=" "+e.args),yield Neutralino.os.execCommand(i,{background:!0}),Neutralino.app.exit(),t()}))},getConfig:function(){return n("app.getConfig")},broadcast:function(e,t){return n("app.broadcast",{event:e,data:t})}});const _=new WeakMap;var F=Object.freeze({__proto__:null,setTitle:function(e){return n("window.setTitle",{title:e})},getTitle:function(){return n("window.getTitle")},maximize:function(){return n("window.maximize")},unmaximize:function(){return n("window.unmaximize")},isMaximized:function(){return n("window.isMaximized")},minimize:function(){return n("window.minimize")},setFullScreen:function(){return n("window.setFullScreen")},exitFullScreen:function(){return n("window.exitFullScreen")},isFullScreen:function(){return n("window.isFullScreen")},show:function(){return n("window.show")},hide:function(){return n("window.hide")},isVisible:function(){return n("window.isVisible")},focus:function(){return n("window.focus")},setIcon:function(e){return n("window.setIcon",{icon:e})},move:function(e,t){return n("window.move",{x:e,y:t})},setDraggableRegion:function(e){return new Promise((t,i)=>{const o=e instanceof Element?e:document.getElementById(e);let s=0,u=0;if(!o)return i({code:"NE_WD_DOMNOTF",message:"Unable to find DOM element"});if(_.has(o))return i({code:"NE_WD_ALRDREL",message:"This DOM element is already an active draggable region"});function r(d){return l(this,void 0,void 0,function*(){yield Neutralino.window.move(d.screenX-s,d.screenY-u)})}function a(d){0===d.button&&(s=d.clientX,u=d.clientY,o.addEventListener("pointermove",r),o.setPointerCapture(d.pointerId))}function w(d){o.removeEventListener("pointermove",r),o.releasePointerCapture(d.pointerId)}o.addEventListener("pointerdown",a),o.addEventListener("pointerup",w),_.set(o,{pointerdown:a,pointerup:w}),t({success:!0,message:"Draggable region was activated"})})},unsetDraggableRegion:function(e){return new Promise((t,i)=>{const o=e instanceof Element?e:document.getElementById(e);if(!o)return i({code:"NE_WD_DOMNOTF",message:"Unable to find DOM element"});if(!_.has(o))return i({code:"NE_WD_NOTDRRE",message:"DOM element is not an active draggable region"});const{pointerdown:s,pointerup:u}=_.get(o);o.removeEventListener("pointerdown",s),o.removeEventListener("pointerup",u),_.delete(o),t({success:!0,message:"Draggable region was deactivated"})})},setSize:function(e){return new Promise((t,i)=>l(this,void 0,void 0,function*(){let o=yield Neutralino.window.getSize();n("window.setSize",e=Object.assign(Object.assign({},o),e)).then(s=>{t(s)}).catch(s=>{i(s)})}))},getSize:function(){return n("window.getSize")},getPosition:function(){return n("window.getPosition")},setAlwaysOnTop:function(e){return n("window.setAlwaysOnTop",{onTop:e})},create:function(e,t){return new Promise((i,o)=>{function s(r){return"string"!=typeof r||(r=r.trim()).includes(" ")&&(r=`"${r}"`),r}let u=window.NL_ARGS.reduce((r,a,w)=>((a.includes("--path=")||a.includes("--debug-mode")||a.includes("--load-dir-res")||0==w)&&(r+=" "+s(a)),r),"");u+=" --url="+s(e);for(let r in t)"processArgs"!=r&&(u+=` --window${r.replace(/[A-Z]|^[a-z]/g,a=>"-"+a.toLowerCase())}=${s(t[r])}`);t&&t.processArgs&&(u+=" "+t.processArgs),Neutralino.os.execCommand(u,{background:!0}).then(r=>{i(r)}).catch(r=>{o(r)})})}}),A=Object.freeze({__proto__:null,broadcast:function(e,t){return n("events.broadcast",{event:e,data:t})},on:function(e,t){return window.addEventListener(e,t),Promise.resolve({success:!0,message:"Event listener added"})},off:function(e,t){return window.removeEventListener(e,t),Promise.resolve({success:!0,message:"Event listener removed"})},dispatch:m}),j=Object.freeze({__proto__:null,dispatch:function(e,t,i){return new Promise((o,s)=>l(this,void 0,void 0,function*(){let u=yield Neutralino.extensions.getStats();if(u.loaded.includes(e))if(u.connected.includes(e))try{let r=yield n("extensions.dispatch",{extensionId:e,event:t,data:i});o(r)}catch(r){s(r)}else a={method:"extensions.dispatch",data:{extensionId:e,event:t,data:i},resolve:o,reject:s},(r=e)in v?v[r].push(a):v[r]=[a];else s({code:"NE_EX_EXTNOTL",message:`${e} is not loaded`});var r,a}))},broadcast:function(e,t){return n("extensions.broadcast",{event:e,data:t})},getStats:function(){return n("extensions.getStats")}});let N=null;var U=Object.freeze({__proto__:null,checkForUpdates:function(e){return new Promise((t,i)=>l(this,void 0,void 0,function*(){if(!e)return i({code:"NE_RT_NATRTER",message:"Missing require parameter: url"});try{let o=yield fetch(e);N=JSON.parse(yield o.text()),(s=N).applicationId&&s.applicationId==window.NL_APPID&&s.version&&s.resourcesURL?t(N):i({code:"NE_UP_CUPDMER",message:"Invalid update manifest or mismatching applicationId"})}catch{i({code:"NE_UP_CUPDERR",message:"Unable to fetch update manifest"})}var s}))},install:function(){return new Promise((e,t)=>l(this,void 0,void 0,function*(){if(!N)return t({code:"NE_UP_UPDNOUF",message:"No update manifest loaded"});try{let i=yield fetch(N.resourcesURL),o=yield i.arrayBuffer();yield Neutralino.filesystem.writeBinaryFile(window.NL_PATH+"/resources.neu",o),e({success:!0,message:"Update installed. Restart the process to see updates"})}catch{t({code:"NE_UP_UPDINER",message:"Update installation error"})}}))}}),M=Object.freeze({__proto__:null,readText:function(e,t){return n("clipboard.readText",{key:e,data:t})},writeText:function(e){return n("clipboard.writeText",{data:e})}});let T=!1;return c.app=C,c.clipboard=M,c.computer=P,c.debug=D,c.events=A,c.extensions=j,c.filesystem=S,c.init=function(){T||(function I(){window.NL_TOKEN&&sessionStorage.setItem("NL_TOKEN",window.NL_TOKEN),f=new WebSocket(`ws://${window.location.hostname}:${window.NL_PORT}`),function(){Neutralino.events.on("ready",()=>l(this,void 0,void 0,function*(){if(yield R(O),!window.NL_EXTENABLED)return;let e=yield Neutralino.extensions.getStats();for(let t of e.connected)m("extensionReady",t)})),Neutralino.events.on("extClientConnect",e=>{m("extensionReady",e.detail)}),window.NL_EXTENABLED&&Neutralino.events.on("extensionReady",e=>l(this,void 0,void 0,function*(){e.detail in v&&(yield R(v[e.detail]),delete v[e.detail])}))}(),function(){f.addEventListener("message",e=>{var t,i;const o=JSON.parse(e.data);o.id&&o.id in g?(null!==(t=o.data)&&void 0!==t&&t.error?(g[o.id].reject(o.data.error),"NE_RT_INVTOKN"==o.data.error.code&&(f.close(),document.body.innerText="",document.write("<code>NE_RT_INVTOKN</code>: Neutralinojs application configuration prevents accepting native calls from this client."))):!(null===(i=o.data)||void 0===i)&&i.success&&g[o.id].resolve(o.data.hasOwnProperty("returnValue")?o.data.returnValue:o.data),delete g[o.id]):o.event&&m(o.event,o.data)}),f.addEventListener("open",e=>l(this,void 0,void 0,function*(){m("ready")})),f.addEventListener("close",e=>l(this,void 0,void 0,function*(){m("serverOffline",{code:"NE_CL_NSEROFF",message:"Neutralino server is offline. Try restarting the application"})}))}()}(),window.NL_ARGS.find(e=>"--neu-dev-auto-reload"==e)&&Neutralino.events.on("neuDev_reloadApp",()=>l(this,void 0,void 0,function*(){yield Neutralino.debug.log("Reloading the application..."),location.reload()})),window.NL_CVERSION="3.6.0",window.NL_CCOMMIT="0a28a7f28614f676f06e9a1a723fed6602fd9861",T=!0)},c.os=L,c.storage=x,c.updater=U,c.window=F,Object.defineProperty(c,"__esModule",{value:!0}),c}({});function showInfo(){document.getElementById("info-time").innerHTML=`\n    ${NL_APPID} is running on port ${NL_PORT}  inside ${NL_OS}\n    <br/><br/>\n    <span>server: v${NL_VERSION} . client: v${NL_CVERSION}</span>\n    `}function openDocs(){Neutralino.os.open("https://neutralino.js.org/docs")}function openTutorial(){Neutralino.os.open("https://www.youtube.com/watch?v=txDlNNsgSh8&list=PLvTbqpiPhQRb2xNQlwMs0uVV0IN8N-pKj")}function setTray(){"window"==NL_MODE?Neutralino.os.setTray({icon:"/resources/icons/trayIcon.png",menuItems:[{id:"VERSION",text:"Get version"},{id:"SEP",text:"-"},{id:"QUIT",text:"Quit"}]}):console.log("INFO: Tray menu is only available in the window mode.")}function onTrayMenuItemClicked(c){switch(c.detail.id){case"VERSION":Neutralino.os.showMessageBox("Version information",`Neutralinojs server: v${NL_VERSION} | Neutralinojs client: v${NL_CVERSION}`);break;case"QUIT":Neutralino.app.exit()}}function onWindowClose(){Neutralino.app.exit()}Neutralino.init(),Neutralino.events.on("trayMenuItemClicked",onTrayMenuItemClicked),Neutralino.events.on("windowClose",onWindowClose),"Darwin"!=NL_OS&&setTray();let lastKeyDown=0;window.addEventListener("keydown",c=>{[91,93].includes(lastKeyDown)&&81===c.which&&Neutralino.app.exit(),lastKeyDown=c.which});